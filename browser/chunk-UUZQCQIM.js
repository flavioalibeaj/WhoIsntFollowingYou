import{a as T,c as U,f as E,h as I,i as k}from"./chunk-KUBPJ33I.js";import{i as N,j as C,k as H,s as L,t as S}from"./chunk-SSSOVN23.js";import{b as M}from"./chunk-XUFINRB4.js";import{Sa as c,Ta as n,U as w,Ua as r,Y as _,Z as h,Za as y,_a as a,ea as s,gb as v,jb as p,kb as b,oa as m,ub as F,vb as D,wa as u}from"./chunk-YCMUMKBD.js";var g=class d{label=D.required();accept=".json";isDisabled=s(!1);fileName=s(null);onLoad=F();onFileSelected(t){this.isDisabled.set(!0);let e=t.target.files?.[0];if(!e){this.fileName.set(null),this.isDisabled.set(!1);return}this.isDisabled.set(!0);let l=new FileReader;l.onload=()=>{let i=JSON.parse(l.result);try{if(this.label()==="Following"&&!i.relationships_following||this.label()==="Followers"&&!i.length||!i[0].string_list_data.length)return;this.fileName.set(e?.name??null),this.onLoad.emit(i)}catch{i=null}finally{this.isDisabled.set(!1)}},l.onerror=()=>{},l.readAsText(e)}static \u0275fac=function(o){return new(o||d)};static \u0275cmp=u({type:d,selectors:[["wify-file-upload"]],inputs:{label:[1,"label"]},outputs:{onLoad:"onLoad"},decls:9,vars:3,consts:[["fileInput",""],[1,"p-4","gap-4","min-w-52",3,"click","elevateOnHover"],[1,"justify-center"],[1,"text-center"],["type","file","hidden","",3,"change","accept"]],template:function(o,e){if(o&1){let l=y();n(0,"mat-card",1),a("click",function(){_(l);let f=v(8);return h(!e.isDisabled()&&f.click())}),n(1,"mat-card-header",2)(2,"mat-icon"),p(3,"attach_file"),r()(),n(4,"mat-card-content",3)(5,"p"),p(6),r()()(),n(7,"input",4,0),a("change",function(f){return _(l),h(e.onFileSelected(f))}),r()}o&2&&(c("elevateOnHover",!0),m(6),b(e.fileName()??e.label()),m(),c("accept",e.accept))},dependencies:[N,H,C,I,T,U,E,L],styles:["mat-card[_ngcontent-%COMP%]:hover{--mat-card-elevated-container-color: var(--mat-sys-surface-dim)}"]})};var x=class d{wify=w(k);router=w(M);followers=s([]);following=s([]);setFollowers(t){this.followers.set(t)}setFollowing({relationships_following:t}){this.following.set(t)}goToResults(){let t=this.wify.whoIsntFollowingYou(this.followers(),this.following());this.router.navigate(["/result"],{state:{result:t}})}static \u0275fac=function(o){return new(o||d)};static \u0275cmp=u({type:d,selectors:[["ng-component"]],decls:7,vars:1,consts:[[1,"flex","flex-col","items-center","gap-4"],[1,"text-xl","mt-4","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-10"],["label","Following",3,"onLoad"],["label","Followers",3,"onLoad"],["text","Check Results","icon","search",3,"clicked","isDisabled"]],template:function(o,e){o&1&&(n(0,"div",0)(1,"h1",1),p(2,"Upload files"),r(),n(3,"div",2)(4,"wify-file-upload",3),a("onLoad",function(i){return e.setFollowing(i)}),r(),n(5,"wify-file-upload",4),a("onLoad",function(i){return e.setFollowers(i)}),r()(),n(6,"wify-button",5),a("clicked",function(){return e.goToResults()}),r()()),o&2&&(m(6),c("isDisabled",!e.followers().length||!e.following().length))},dependencies:[S,g],encapsulation:2})};export{x as Home};
